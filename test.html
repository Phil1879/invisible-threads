<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>Батьківські директиви: тест і курс | Психологічна діагностика онлайн</title>
    <meta name="title" content="Батьківські директиви: тест і курс | Психологічна діагностика онлайн">
    <meta name="description" content="Безкоштовний психологічний тест на батьківські директиви. Дізнайся, які невидимі установки з дитинства керують твоїм життям. 12 директив, 5 хвилин, миттєвий результат.">
    <meta name="keywords" content="батьківські директиви, психологічний тест, онлайн діагностика, психологія, транзакційний аналіз, самопізнання, психотерапія, особистісне зростання">
    <meta name="author" content="Батьківські директиви: невидимі нитки">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Ukrainian">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yoursite.com/">
    <meta property="og:title" content="Батьківські директиви: тест і курс | Психологічна діагностика">
    <meta property="og:description" content="Пройди безкоштовний тест і дізнайся, які несвідомі програми з дитинства впливають на твоє життя, стосунки та енергію.">
    <meta property="og:image" content="https://yoursite.com/og-image.jpg">
    <meta property="og:locale" content="uk_UA">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yoursite.com/">
    <meta property="twitter:title" content="Батьківські директиви: тест і курс | Психологічна діагностика">
    <meta property="twitter:description" content="Пройди безкоштовний тест і дізнайся, які несвідомі програми з дитинства впливають на твоє життя, стосунки та енергію.">
    <meta property="twitter:image" content="https://yoursite.com/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://yoursite.com/">
    
    <!-- Schema.org markup for Google -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Батьківські директиви: невидимі нитки",
      "description": "Психологічний тест на виявлення батьківських директив та авторський курс з їх проробки",
      "url": "https://yoursite.com/",
      "applicationCategory": "HealthApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "UAH"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "127"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Що таке батьківські директиви?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Батьківські директиви - це несвідомі програми, які батьки передають дітям через слова, поведінку та емоції. Вони формуються у дитинстві і впливають на все доросле життя, стосунки, кар'єру та самопочуття."
          }
        },
        {
          "@type": "Question",
          "name": "Скільки часу займає тест?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Тест займає всього 5 хвилин. Він складається з 12 питань, кожне з яких діагностує одну з батьківських директив. Результат ви отримаєте миттєво після завершення."
          }
        },
        {
          "@type": "Question",
          "name": "Чи безпечно проходити тест?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Так, абсолютно безпечно. Всі ваші дані захищені та не передаються третім особам. Конфіденційність гарантована."
          }
        },
        {
          "@type": "Question",
          "name": "Які 12 директив діагностує тест?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Тест діагностує всі 12 основних батьківських директив: Не живи, Не будь дитиною, Не будь собою, Не будь близьким, Не відчувай, Не думай, Не роби, Не досягай успіху, Не будь здоровим, Не будь щасливим, Не будь значущим, Не будь у своїй ролі."
          }
        }
      ]
    }
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-tap-highlight-color: transparent;
        }
        button, input {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .option-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(14, 165, 233, 0.1), transparent);
            transition: left 0.5s;
        }
        .option-btn:active {
            transform: scale(0.97);
            border-color: #0ea5e9;
        }
        .progress-bar {
            transition: width 0.4s ease;
        }
        .cta-button {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .cta-button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        .cta-button:active {
            transform: scale(0.98);
        }
        .stat-number {
            font-variant-numeric: tabular-nums;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container-padding { padding: 1.5rem; }
            .title-text { font-size: 2rem; }
            .subtitle-text { font-size: 1.125rem; }
            .stat-text { font-size: 1.75rem; }
            .button-text { font-size: 1.125rem; }
            .question-text { font-size: 1.5rem; }
        }
        
        /* Desktop hover effects */
        @media (min-width: 768px) {
            .option-btn:hover {
                transform: translateX(4px);
                border-color: #0ea5e9;
                box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
            }
            .option-btn:hover::before {
                left: 100%;
            }
            .cta-button:hover::after {
                width: 300px;
                height: 300px;
            }
            .cta-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 24px rgba(14, 165, 233, 0.3);
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app" class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="min-h-screen flex items-center justify-center p-6 md:p-16">
            <div class="bg-white rounded-3xl shadow-2xl max-w-5xl w-full p-6 md:p-16 fade-in">
                <div class="text-center space-y-8 md:space-y-12">
                    <div class="space-y-4 md:space-y-6">
                        <h1 class="text-4xl md:text-6xl font-black bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent leading-tight">
                            Батьківські директиви: невидимі нитки
                        </h1>
                        <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                            Дізнайся, які несвідомі програми з дитинства керують твоїм життям, стосунками та енергією
                        </p>
                    </div>

                    <div class="grid grid-cols-3 gap-4 md:gap-8 py-8 md:py-12 border-y border-gray-200">
                        <div class="space-y-2">
                            <div class="text-3xl md:text-4xl font-bold text-blue-600 stat-number">12</div>
                            <div class="text-xs md:text-sm text-gray-500">Батьківських директив</div>
                        </div>
                        <div class="space-y-2">
                            <div class="text-3xl md:text-4xl font-bold text-blue-600 stat-number">5 хв</div>
                            <div class="text-xs md:text-sm text-gray-500">Час проходження</div>
                        </div>
                        <div class="space-y-2">
                            <div id="user-counter" class="text-3xl md:text-4xl font-bold text-blue-600 stat-number">127</div>
                            <div class="text-xs md:text-sm text-gray-500">Вже пройшли тест</div>
                        </div>
                    </div>

                    <div class="space-y-4 md:space-y-6">
                        <button 
                            onclick="showRegistration()" 
                            class="cta-button w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-lg md:text-xl font-bold py-4 md:py-5 px-8 md:px-12 rounded-2xl shadow-lg relative z-10"
                        >
                            Пройти тест безкоштовно
                        </button>
                        <p class="text-sm text-gray-500">
                            ⚡ Результат миттєво • 🔒 Конфіденційно
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Registration Screen -->
        <div id="registration-screen" class="hidden min-h-screen flex items-center justify-center p-6 md:p-16">
            <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full p-6 md:p-16 fade-in">
                <div class="space-y-6 md:space-y-8">
                    <div class="text-center space-y-3 md:space-y-4">
                        <h2 class="text-3xl md:text-4xl font-black text-gray-800">Залиш свої дані</h2>
                        <p class="text-base md:text-lg text-gray-600">
                            Це допоможе нам відправити детальний аналіз результатів
                        </p>
                    </div>

                    <!-- Google Sign-In Button -->
                    <div class="mb-6">
                        <div class="flex justify-center mb-4">
                            <div id="g_id_onload"
                                 data-client_id="235318440279-1iddddptnnaq848qn5ucn58jdgalo2r3.apps.googleusercontent.com"
                                 data-callback="handleGoogleSignIn"
                                 data-auto_prompt="false">
                            </div>
                            <div class="g_id_signin"
                                 data-type="standard"
                                 data-size="large"
                                 data-theme="outline"
                                 data-text="continue_with"
                                 data-shape="rectangular"
                                 data-logo_alignment="left"
                                 data-width="360">
                            </div>
                        </div>
                        
                        <div class="relative my-6">
                            <div class="absolute inset-0 flex items-center">
                                <div class="w-full border-t border-gray-300"></div>
                            </div>
                            <div class="relative flex justify-center text-sm">
                                <span class="px-4 bg-white text-gray-500">або заповніть вручну</span>
                            </div>
                        </div>
                    </div>

                    <form id="registration-form" class="space-y-4 md:space-y-5">
                        <div>
                            <label for="user-name" class="block text-sm font-semibold text-gray-700 mb-2">Ім'я *</label>
                            <input 
                                type="text" 
                                id="user-name" 
                                name="name" 
                                required
                                class="w-full px-4 py-3 md:py-4 border-2 border-gray-200 rounded-xl text-base focus:outline-none focus:border-blue-500 transition-colors"
                                placeholder="Ваше ім'я"
                            >
                        </div>
                        
                        <div>
                            <label for="user-email" class="block text-sm font-semibold text-gray-700 mb-2">Email *</label>
                            <input 
                                type="email" 
                                id="user-email" 
                                name="email" 
                                required
                                class="w-full px-4 py-3 md:py-4 border-2 border-gray-200 rounded-xl text-base focus:outline-none focus:border-blue-500 transition-colors"
                                placeholder="your@email.com"
                            >
                        </div>
                        
                        <div>
                            <label for="user-phone" class="block text-sm font-semibold text-gray-700 mb-2">Телефон *</label>
                            <input 
                                type="tel" 
                                id="user-phone" 
                                name="phone" 
                                required
                                class="w-full px-4 py-3 md:py-4 border-2 border-gray-200 rounded-xl text-base focus:outline-none focus:border-blue-500 transition-colors"
                                placeholder="+380"
                            >
                        </div>
                        
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-xl">
                            <p class="text-sm text-gray-700">
                                🔒 Ваші дані захищені. Ми не передаємо їх третім особам.
                            </p>
                        </div>
                        
                        <div class="space-y-3">
                            <button 
                                type="submit" 
                                class="cta-button w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-lg md:text-xl font-bold py-4 md:py-5 px-8 rounded-2xl shadow-lg relative z-10"
                            >
                                Почати тест
                            </button>
                            <button 
                                type="button" 
                                onclick="backToWelcome()" 
                                class="w-full bg-transparent text-gray-600 py-3 px-8 rounded-xl text-base font-semibold hover:bg-gray-50 transition-colors"
                            >
                                ← Назад
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="hidden min-h-screen flex items-center justify-center p-6 md:p-16">
            <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full p-6 md:p-16 fade-in">
                <div class="space-y-6 md:space-y-8">
                    <div class="space-y-3 md:space-y-4">
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <span>Питання <span id="current-question" class="font-semibold text-blue-600">1</span> з 12</span>
                            <span id="progress-percentage" class="font-semibold">8%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="progress-bar" class="progress-bar bg-gradient-to-r from-blue-600 to-indigo-600 h-2 rounded-full" style="width: 8.33%"></div>
                        </div>
                    </div>

                    <div class="space-y-3 md:space-y-4">
                        <h2 id="question-text" class="text-2xl md:text-3xl font-bold text-gray-800 leading-snug"></h2>
                        <p id="question-description" class="text-base text-gray-600"></p>
                    </div>

                    <div id="options-container" class="space-y-3 md:space-y-4">
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="hidden min-h-screen flex items-center justify-center p-6 md:p-16">
            <div class="bg-white rounded-3xl shadow-2xl max-w-6xl w-full p-6 md:p-16 fade-in">
                <div class="space-y-8 md:space-y-12">
                    <div class="text-center space-y-4 md:space-y-6">
                        <div class="inline-block p-3 md:p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-full">
                            <div class="text-4xl md:text-5xl">🎯</div>
                        </div>
                        <h2 class="text-3xl md:text-5xl font-black text-gray-800">Твоя провідна директива</h2>
                        <p class="text-lg md:text-xl text-gray-600 max-w-2xl mx-auto">
                            Ось що найбільше впливає на твоє життя зараз
                        </p>
                    </div>

                    <div id="results-container" class="space-y-6">
                    </div>

                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 md:p-10 space-y-4 md:space-y-6">
                        <div class="text-center space-y-3 md:space-y-4">
                            <h3 class="text-2xl md:text-3xl font-bold text-gray-800">🌟 Що далі?</h3>
                            <p class="text-base md:text-lg text-gray-700 max-w-2xl mx-auto">
                                Тепер, коли ти знаєш свої директиви, час навчитися з ними працювати. 
                                Приєднуйся до авторського курсу з глибокої проробки
                            </p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4">
                            <div class="flex items-center gap-2 md:gap-3 text-sm text-gray-700 bg-white p-3 md:p-4 rounded-xl">
                                <span class="text-xl">📹</span>
                                <span class="font-semibold">12 відеоуроків</span>
                            </div>
                            <div class="flex items-center gap-2 md:gap-3 text-sm text-gray-700 bg-white p-3 md:p-4 rounded-xl">
                                <span class="text-xl">📝</span>
                                <span class="font-semibold">Практичні завдання</span>
                            </div>
                            <div class="flex items-center gap-2 md:gap-3 text-sm text-gray-700 bg-white p-3 md:p-4 rounded-xl">
                                <span class="text-xl">💬</span>
                                <span class="font-semibold">Підтримка психолога</span>
                            </div>
                        </div>

                        <div class="text-center space-y-3 md:space-y-4">
                            <button 
                                onclick="bookPsychologist()" 
                                class="cta-button w-full md:w-auto bg-gradient-to-r from-green-500 to-emerald-600 text-white text-lg md:text-xl font-bold py-4 md:py-5 px-8 md:px-12 rounded-2xl shadow-lg relative z-10 mb-3"
                            >
                                💬 Запис до психолога
                            </button>
                            <button 
                                onclick="openCourseLink()" 
                                class="cta-button w-full md:w-auto bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-lg md:text-xl font-bold py-4 md:py-5 px-8 md:px-12 rounded-2xl shadow-lg relative z-10"
                            >
                                🎯 Дізнатись про курс
                            </button>
                            <p class="text-sm text-gray-600">
                                📚 Глибока трансформаційна програма
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Legal Documents Links -->
                <div class="mt-8 md:mt-12 pt-6 md:pt-8 border-t border-gray-200">
                    <div class="flex flex-col sm:flex-row gap-3 justify-center">
                        <button 
                            onclick="openNDA()" 
                            class="px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl text-sm font-semibold transition-colors"
                        >
                            📋 Договір конфіденційності (NDA)
                        </button>
                        <button 
                            onclick="openDisclaimer()" 
                            class="px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl text-sm font-semibold transition-colors"
                        >
                            ⚠️ Відмова від відповідальності
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- NDA Modal -->
        <div id="nda-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" onclick="closeNDA(event)">
            <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
                <div class="sticky top-0 bg-white border-b border-gray-200 px-6 md:px-8 py-4 md:py-6 flex justify-between items-center rounded-t-2xl">
                    <h3 class="text-xl md:text-2xl font-bold text-gray-800">📋 Договір конфіденційності (NDA)</h3>
                    <button onclick="closeNDA()" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">&times;</button>
                </div>
                <div class="px-6 md:px-8 py-6 md:py-8 space-y-6">
                    <p class="text-sm text-gray-600 italic">для учасників курсу «Батьківські директиви: невидимі нитки»</p>
                    
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">1. Сторони:</h4>
                            <p class="text-gray-700">ФОП Казар'ян Павло Ашотович (далі - «Сторона 1»)<br>та фізична особа - учасник курсу (далі - «Сторона 2»).</p>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">2. Мета:</h4>
                            <p class="text-gray-700">Забезпечити конфіденційність усієї інформації, що передається під час навчання, консультацій і групових сесій.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">3. Конфіденційна інформація:</h4>
                            <ul class="list-disc list-inside text-gray-700 space-y-1">
                                <li>особисті історії, досвід, висловлювання учасників;</li>
                                <li>методики, техніки, матеріали, записи, скрипти, завдання;</li>
                                <li>внутрішні комунікації (Telegram-чати, листування, записи занять).</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">4. Обов'язки учасника:</h4>
                            <ul class="list-disc list-inside text-gray-700 space-y-1">
                                <li>не розголошувати, не копіювати та не поширювати матеріали курсу;</li>
                                <li>не записувати відео/аудіо без письмового дозволу;</li>
                                <li>не поширювати особисті історії інших учасників;</li>
                                <li>не використовувати знання для створення конкуруючих продуктів без дозволу.</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">5. Термін дії:</h4>
                            <p class="text-gray-700">Безстроково. Зобов'язання нерозголошення діють 3 роки після завершення курсу.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">6. Відповідальність:</h4>
                            <p class="text-gray-700">У разі порушення умов - Сторона 1 може звернутися до суду та вимагати відшкодування збитків.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">7. Юрисдикція:</h4>
                            <p class="text-gray-700">Усі правовідносини регулюються законодавством України.<br>Спори вирішуються за місцем реєстрації Сторони 1.</p>
                        </div>
                        
                        <div class="bg-blue-50 rounded-xl p-4 md:p-6">
                            <h4 class="font-bold text-gray-800 mb-3">8. Реквізити Виконавця:</h4>
                            <div class="text-sm text-gray-700 space-y-1">
                                <p class="font-semibold">ФОП Казар'ян Павло Ашотович</p>
                                <p>ІПН 2847814635</p>
                                <p>📍 Миколаївська обл., м. Очаків, вул. Потьомкіна, 4, кв. 74</p>
                                <p>📧 pavel.kazarjan@gmail.com</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pt-4">
                        <button 
                            onclick="closeNDA()" 
                            class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-8 rounded-xl font-bold hover:shadow-lg transition-all"
                        >
                            Зрозуміло
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Disclaimer Modal -->
        <div id="disclaimer-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" onclick="closeDisclaimer(event)">
            <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
                <div class="sticky top-0 bg-white border-b border-gray-200 px-6 md:px-8 py-4 md:py-6 flex justify-between items-center rounded-t-2xl">
                    <h3 class="text-xl md:text-2xl font-bold text-gray-800">⚠️ Відмова від відповідальності</h3>
                    <button onclick="closeDisclaimer()" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">&times;</button>
                </div>
                <div class="px-6 md:px-8 py-6 md:py-8 space-y-5">
                    <div class="bg-amber-50 border-l-4 border-amber-500 p-5 rounded-r-xl">
                        <p class="text-sm md:text-base text-gray-800 leading-relaxed">
                            <strong class="text-amber-800">Важливо розуміти:</strong> Цей тест є інформаційно-освітнім інструментом і <strong>не замінює</strong> професійної психологічної консультації або медичної допомоги.
                        </p>
                    </div>
                    
                    <div class="space-y-4 text-gray-700">
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">Про тест:</h4>
                            <ul class="list-disc list-inside space-y-2">
                                <li>Результати тесту мають виключно <strong>рекомендаційний характер</strong></li>
                                <li>Тест не є медичним діагностичним інструментом</li>
                                <li>Результати не можуть бути основою для самодіагностики</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">Коли потрібна професійна допомога:</h4>
                            <p class="mb-2">Якщо ви відчуваєте:</p>
                            <ul class="list-disc list-inside space-y-1">
                                <li>Серйозні психологічні труднощі</li>
                                <li>Суїцидальні думки</li>
                                <li>Глибоку депресію або тривогу</li>
                                <li>Нездатність функціонувати в повсякденному житті</li>
                            </ul>
                            <p class="mt-3 font-semibold text-amber-700">Будь ласка, негайно зверніться до кваліфікованого психотерапевта або психіатра!</p>
                        </div>
                        
                        <div>
                            <h4 class="font-bold text-gray-800 mb-2">Обмеження відповідальності:</h4>
                            <p>Автори тесту та курсу не несуть відповідальності за будь-які рішення або дії, прийняті на основі результатів тесту. Відповідальність за використання інформації повністю лягає на користувача.</p>
                        </div>
                        
                        <div class="bg-blue-50 rounded-xl p-4">
                            <p class="text-sm">
                                <strong>Контакти для питань:</strong><br>
                                📧 pavel.kazarjan@gmail.com
                            </p>
                        </div>
                    </div>
                    
                    <div class="pt-4">
                        <button 
                            onclick="closeDisclaimer()" 
                            class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-8 rounded-xl font-bold hover:shadow-lg transition-all"
                        >
                            Зрозуміло
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        // Quiz data
        const questions = [
            {
                directive: "НЕ ЖИВИ",
                question: "Чи відчуваєш ти іноді, що твоє існування - це тягар для інших?",
                description: "Подумай про свої глибокі відчуття щодо власного права на життя",
                options: [
                    { text: "Так, часто думаю, що світу було б краще без мене", score: 3 },
                    { text: "Іноді здається, що я завжди всім заважаю", score: 2 },
                    { text: "Буває, що соромлюсь своїх потреб і бажань", score: 1 },
                    { text: "Ні, я відчуваю своє право на життя і простір", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ ДИТИНОЮ",
                question: "Чи був ти 'маленьким дорослим' у дитинстві? Як ти зараз ставишся до спонтанності й легкості?",
                description: "Оціни свою здатність бути спонтанним і грайливим",
                options: [
                    { text: "Безтурботність і гра викликають у мене сором або тривогу", score: 3 },
                    { text: "Я завжди маю бути серйозним і відповідальним", score: 2 },
                    { text: "Дозволяю собі розслабитись, лише коли 'заслужив'", score: 1 },
                    { text: "Легко можу бути спонтанним і грайливим", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ СОБОЮ",
                question: "Чи знаєш ти, хто ти насправді, коли нікого немає поруч?",
                description: "Подумай про свою справжню ідентичність",
                options: [
                    { text: "Ні, я завжди підлаштовуюсь під інших", score: 3 },
                    { text: "Мені важко відчути свої справжні бажання", score: 2 },
                    { text: "Іноді гублюся в очікуваннях оточення", score: 1 },
                    { text: "Так, я чітко відчуваю свою ідентичність", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ БЛИЗЬКИМ",
                question: "Що відбувається, коли стосунки стають надто близькими та інтимними?",
                description: "Подумай про свою реакцію на глибоку близькість",
                options: [
                    { text: "Відчуваю паніку і хочу втекти", score: 3 },
                    { text: "Починаю саботувати стосунки", score: 2 },
                    { text: "Відчуваю дискомфорт і відстороненість", score: 1 },
                    { text: "Почуваюся комфортно в близькості", score: 0 }
                ]
            },
            {
                directive: "НЕ ВІДЧУВАЙ",
                question: "Чи можеш ти назвати, що саме зараз відчуваєш? Як ти ставишся до прояву вразливості, смутку або страху?",
                description: "Оціни свій контакт з емоціями",
                options: [
                    { text: "Не можу розпізнати свої емоції взагалі", score: 3 },
                    { text: "Вразливість та сум - це неприйнятно для мене", score: 2 },
                    { text: "Деякі емоції я можу відчувати, інші - ні", score: 1 },
                    { text: "Я добре відчуваю і розумію свої емоції", score: 0 }
                ]
            },
            {
                directive: "НЕ ДУМАЙ",
                question: "Коли потрібно прийняти важливе рішення або розв'язати складне завдання, що відбувається у твоїй голові?",
                description: "Подумай про свою здатність до мислення",
                options: [
                    { text: "У голові туман, не можу зосередитися", score: 3 },
                    { text: "Відчуваю блокування думок", score: 2 },
                    { text: "Важко приймати самостійні рішення", score: 1 },
                    { text: "Можу ясно мислити і приймати рішення", score: 0 }
                ]
            },
            {
                directive: "НЕ РОБИ",
                question: "Опиши свій досвід із завершенням справ і досягненням цілей",
                description: "Оціни свою здатність до дії і завершення",
                options: [
                    { text: "Завжди залишаю справи на 90% незавершеними", score: 3 },
                    { text: "Дія викликає сильне виснаження", score: 2 },
                    { text: "Часто прокрастиную і відкладаю", score: 1 },
                    { text: "Легко діють і завершую справи", score: 0 }
                ]
            },
            {
                directive: "НЕ ДОСЯГАЙ УСПІХУ",
                question: "Що відбувається, коли ти на порозі великого досягнення або успіху?",
                description: "Подумай про свою реакцію на успіх",
                options: [
                    { text: "Саботую себе на останньому кроці", score: 3 },
                    { text: "Відчуваю страх і провину", score: 2 },
                    { text: "Відчуваю дискомфорт від успіху", score: 1 },
                    { text: "Приймаю успіх природно", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ ЗДОРОВИМ",
                question: "Чи помічав ти зв'язок між своїм емоційним станом і захворюваннями? Як ти ставишся до своїх потреб?",
                description: "Оціни свою здатність піклуватися про здоров'я",
                options: [
                    { text: "Хвороба - мій спосіб отримати увагу", score: 3 },
                    { text: "Я часто хворію без видимих причин", score: 2 },
                    { text: "Ігнорую потреби свого тіла", score: 1 },
                    { text: "Добре піклуюся про своє здоров'я", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ ЩАСЛИВИМ",
                question: "Що відбувається, коли у твоєму житті настає період радості, спокою або успіху?",
                description: "Подумай про свою толерантність до щастя",
                options: [
                    { text: "Відразу щось руйную", score: 3 },
                    { text: "Відчуваю тривогу і чекаю на біду", score: 2 },
                    { text: "Не вмію насолоджуватись радістю", score: 1 },
                    { text: "Легко приймаю і насолоджуюсь щастям", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ ЗНАЧУЩИМ",
                question: "Як ти реагуєш на можливість проявити себе - виступити, очолити проєкт, бути у центрі уваги?",
                description: "Оціни свою здатність бути помітним",
                options: [
                    { text: "Робити себе невидимим - моя стратегія", score: 3 },
                    { text: "Відчуваю сильний страх видимості", score: 2 },
                    { text: "Намагаюсь уникати уваги", score: 1 },
                    { text: "Комфортно проявляюсь і займаю простір", score: 0 }
                ]
            },
            {
                directive: "НЕ БУДЬ У СВОЇЙ РОЛІ",
                question: "Як ти відчуваєш себе у своїй гендерній ролі? Чи комфортно тобі проявляти свою чоловічу/жіночу природу?",
                description: "Подумай про комфорт у своїй статі",
                options: [
                    { text: "Відчуваю глибокий внутрішній конфлікт", score: 3 },
                    { text: "Придушую свою природну енергію", score: 2 },
                    { text: "Іноді незручно з моєю гендерною роллю", score: 1 },
                    { text: "Комфортно проявляю свою природу", score: 0 }
                ]
            }
        ];

        const directiveDescriptions = {
            "НЕ ЖИВИ": "Це найглибша несвідома програма - заборона на саме існування. Вона формується у немовлячому віці через послання 'краще б ти не народився'. Проявляється через хронічне почуття провини за власне життя, аутоагресію, психосоматичні захворювання та суїцидальні думки. Це не вирок - на курсі ти навчишся відновлювати своє базове право на життя.",
            
            "НЕ БУДЬ ДИТИНОЮ": "Директива 'маленького дорослого', що формується через необхідність рано дорослішати. Проявляється як нездатність грати, відпочивати, бути спонтанним. Ти надто серйозний, перфекціоніст, живеш у хронічному напруженні. На курсі навчишся знову відкривати свою внутрішню дитину.",
            
            "НЕ БУДЬ СОБОЮ": "Втрата власної ідентичності через постійне підлаштовування під інших. Ти не знаєш, хто ти насправді, живеш в очікуваннях оточення. Проявляється як синдром самозванця, залежність від схвалення, невизначеність у виборах. На курсі відновиш контакт зі своїм справжнім 'Я'.",
            
            "НЕ БУДЬ БЛИЗЬКИМ": "Глибокий страх інтимності та довіри. Формується через травми прив'язаності. Проявляється як саботаж стосунків на піку близькості, емоційна холодність, уникнення. Ти самотній навіть у стосунках. На курсі навчишся безпечній близькості.",
            
            "НЕ ВІДЧУВАЙ": "Емоційна блокада - відрізаність від власних почуттів. Формується через заборону на емоції в дитинстві. Проявляється як алекситимія (нездатність розпізнавати емоції), психосоматика, раціоналізація всього. На курсі відновиш контакт зі своїми почуттями.",
            
            "НЕ ДУМАЙ": "Блокування мислительних здібностей. Формується через послання 'не міркуй, роби як кажуть'. Проявляється як когнітивний туман, нездатність приймати рішення, залежність від думки інших. На курсі розблокуєш своє мислення.",
            
            "НЕ РОБИ": "Паралізуюча заборона на дію. Формується через покарання за активність у дитинстві. Проявляється як прокрастинація, незавершені справи (90%), виснаження від будь-якої дії. На курсі відновиш свою природну здатність діяти.",
            
            "НЕ ДОСЯГАЙ УСПІХУ": "Саботаж на фінішній прямій. Формується через заборону перевершувати батьків. Проявляється як сценарій 'майже вдалося', страх успіху, вина за досягнення. На курсі навчишся витримувати і приймати успіх.",
            
            "НЕ БУДЬ ЗДОРОВИМ": "Хвороба як спосіб отримати любов і увагу. Формується, коли хворого більше помічали. Проявляється як психосоматика, вторинна вигода від хвороби, нездатність піклуватись про себе. На курсі навчишся здорових способів отримувати увагу.",
            
            "НЕ БУДЬ ЩАСЛИВИМ": "Активний саботаж радості та успіху. Формується через батьківську заздрість. Проявляється як цикл 'здобув - зруйнував', очікування біди в щасливі моменти, непереносимість позитивних емоцій. На курсі навчишся витримувати щастя.",
            
            "НЕ БУДЬ ЗНАЧУЩИМ": "Страх бути помітним і займати простір. Формується через покарання за яскравість. Проявляється як самоприниження, страх сцени, уникнення відповідальності, синдром 'сірої миші'. На курсі навчишся проявлятись і сяяти.",
            
            "НЕ БУДЬ У СВОЇЙ РОЛІ": "Внутрішній конфлікт з власною статтю. Формується через батьківське розчарування статтю дитини. Проявляється як придушення чоловічої/жіночої енергії, дисфорія, відчуття 'не на своєму місці'. На курсі інтегруєш свою природну енергію."
        };

        let currentQuestion = 0;
        let scores = {};
        let userData = {
            name: '',
            email: '',
            phone: '',
            timestamp: '',
            results: {}
        };

        function startQuiz() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            
            // Initialize scores
            questions.forEach(q => {
                scores[q.directive] = 0;
            });
            
            displayQuestion();
        }

        function displayQuestion() {
            const question = questions[currentQuestion];
            
            document.getElementById('current-question').textContent = currentQuestion + 1;
            document.getElementById('progress-percentage').textContent = Math.round(((currentQuestion + 1) / questions.length) * 100) + '%';
            document.getElementById('progress-bar').style.width = ((currentQuestion + 1) / questions.length * 100) + '%';
            
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-description').textContent = question.description;
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn w-full text-left p-4 md:p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 transition-all';
                button.innerHTML = `
                    <div class="flex items-start gap-3 md:gap-4">
                        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center font-bold text-gray-600">
                            ${index + 1}
                        </div>
                        <div class="flex-1 pt-1 text-base md:text-lg text-gray-700">
                            ${option.text}
                        </div>
                    </div>
                `;
                button.onclick = () => selectOption(option.score);
                container.appendChild(button);
            });
        }

        function selectOption(score) {
            // Add score to the directive (accumulate points)
            const directive = questions[currentQuestion].directive;
            if (!scores[directive]) {
                scores[directive] = 0;
            }
            scores[directive] += score;
            
            console.log(`Question ${currentQuestion + 1}: ${directive} - selected score: ${score}, total: ${scores[directive]}`);
            
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                displayQuestion();
            } else {
                console.log('Final scores:', scores);
                // Save results to userData
                userData.results = { ...scores };
                // Send data to Google Sheets
                sendToGoogleSheets();
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            // Get only the TOP directive (highest score)
            const sortedDirectives = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .filter(([_, score]) => score > 0);
            
            console.log('Sorted directives:', sortedDirectives);
            
            const container = document.getElementById('results-container');
            container.innerHTML = '';
            
            // Show only the first (dominant) directive
            if (sortedDirectives.length > 0) {
                const [directive, totalScore] = sortedDirectives[0];
                
                // Determine severity based on total score
                // Since each question has max score of 3, we analyze the intensity
                let severity;
                let severityColor;
                
                if (totalScore >= 3) {
                    severity = 'Високий рівень впливу';
                    severityColor = 'red';
                } else if (totalScore >= 2) {
                    severity = 'Середній рівень впливу';
                    severityColor = 'orange';
                } else if (totalScore >= 1) {
                    severity = 'Помірний рівень впливу';
                    severityColor = 'blue';
                } else {
                    severity = 'Низький рівень впливу';
                    severityColor = 'green';
                }
                
                console.log(`Dominant directive: ${directive} with score ${totalScore} (${severity})`);
                
                const card = document.createElement('div');
                const bgColor = severityColor === 'red' ? 'from-red-50 to-orange-50 border-red-200' : 
                                severityColor === 'orange' ? 'from-orange-50 to-yellow-50 border-orange-200' : 
                                'from-blue-50 to-indigo-50 border-blue-200';
                card.className = `bg-gradient-to-br ${bgColor} border-2 rounded-2xl p-6 md:p-8`;
                card.innerHTML = `
                    <div class="space-y-4 md:space-y-6">
                        <div class="text-center">
                            <div class="inline-block bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 md:px-8 py-3 md:py-4 rounded-xl mb-4">
                                <h3 class="text-2xl md:text-3xl font-black">«${directive}»</h3>
                            </div>
                            <div class="inline-block px-4 md:px-6 py-2 bg-white rounded-full shadow-sm">
                                <p class="text-sm md:text-base font-bold uppercase tracking-wide" style="color: ${severityColor === 'red' ? '#dc2626' : severityColor === 'orange' ? '#ea580c' : '#2563eb'}">
                                    ${severity}
                                </p>
                            </div>
                        </div>
                        <div class="bg-white rounded-xl p-5 md:p-6">
                            <p class="text-base md:text-lg text-gray-700 leading-relaxed">
                                ${directiveDescriptions[directive]}
                            </p>
                        </div>
                        <div class="bg-blue-100 border-l-4 border-blue-600 p-4 md:p-5 rounded-r-xl">
                            <p class="text-sm md:text-base text-gray-800 leading-relaxed">
                                <strong class="text-blue-800">Важливо розуміти:</strong> Ця директива - не вирок і не діагноз. Це несвідома програма, яку можна трансформувати через глибоку усвідомлену роботу. На курсі ти навчишся розпізнавати її прояви та переписувати цей сценарій.
                            </p>
                        </div>
                    </div>
                `;
                container.appendChild(card);
            }
        }

        function showRegistration() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('registration-screen').classList.remove('hidden');
        }

        function backToWelcome() {
            document.getElementById('registration-screen').classList.add('hidden');
            document.getElementById('welcome-screen').classList.remove('hidden');
        }

        function openCourseLink() {
            window.open('https://invisible-threads.online/', '_blank');
        }
        
        function bookPsychologist() {
            window.open('https://t.me/PavloKazarianBot', '_blank');
        }
        
        // Google Sign-In callback
        function handleGoogleSignIn(response) {
            try {
                // Decode JWT token
                const responsePayload = parseJwt(response.credential);
                
                // Auto-fill form with Google data
                document.getElementById('user-name').value = responsePayload.name || '';
                document.getElementById('user-email').value = responsePayload.email || '';
                
                console.log('✅ Google Sign-In successful:', responsePayload);
                
                // Show success notification
                alert('Вітаємо, ' + responsePayload.name + '! Дані заповнені автоматично. Залишилось вказати телефон.');
            } catch (error) {
                console.error('❌ Error in Google Sign-In:', error);
            }
        }
        
        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            return JSON.parse(jsonPayload);
        }

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        async function sendToGoogleSheets() {
            try {
                // Find dominant directive
                let maxScore = -1;
                let dominantDirective = '';
                for (const [directive, score] of Object.entries(scores)) {
                    if (score > maxScore) {
                        maxScore = score;
                        dominantDirective = directive;
                    }
                }
                
                // Determine impact level
                let impactLevel = '';
                if (maxScore >= 3) {
                    impactLevel = 'Високий';
                } else if (maxScore >= 2) {
                    impactLevel = 'Середній';
                } else if (maxScore >= 1) {
                    impactLevel = 'Помірний';
                } else {
                    impactLevel = 'Низький';
                }
                
                // Prepare detailed scores
                const detailedScores = Object.entries(scores)
                    .map(([dir, score]) => `${dir}: ${score}`)
                    .join(', ');
                
                // Prepare data for Google Sheets
                const formData = {
                    timestamp: new Date().toLocaleString('uk-UA', { 
                        timeZone: 'Europe/Kiev',
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    }),
                    name: userData.name,
                    email: userData.email,
                    phone: userData.phone,
                    dominantDirective: dominantDirective,
                    impactLevel: impactLevel,
                    maxScore: maxScore,
                    allScores: detailedScores
                };
                
                // Google Apps Script Web App URL
                // ✅ Connected to spreadsheet: 1CokIlgnE07eZ1NCW4k7k__4L_G72OqeJ5qRgZbEuAz0
                const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx-_m-0vStRnv-vxYNbCCnQqUBRtHFEx2ymWXzWlRgOgZ5mIIAtbfOAK3Km0Yw4hCcV_Q/exec';
                
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                console.log('✅ Data sent to Google Sheets:', formData);
            } catch (error) {
                console.error('❌ Error sending data to Google Sheets:', error);
                // Continue showing results even if sending fails
            }
        }

        // Fetch real user count from Google Sheets
        async function fetchUserCount() {
            try {
                const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbx-_m-0vStRnv-vxYNbCCnQqUBRtHFEx2ymWXzWlRgOgZ5mIIAtbfOAK3Km0Yw4hCcV_Q/exec';
                const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getCount');
                const data = await response.json();
                
                if (data.count !== undefined) {
                    const totalCount = 127 + data.count;
                    document.getElementById('user-counter').textContent = totalCount;
                    console.log('✅ User count updated:', totalCount);
                }
            } catch (error) {
                console.error('❌ Error fetching user count:', error);
                // Keep default 127 if fetch fails
            }
        }

        // Handle registration form
        document.addEventListener('DOMContentLoaded', () => {
            // Load user count on page load
            fetchUserCount();
            const form = document.getElementById('registration-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const name = document.getElementById('user-name').value.trim();
                const email = document.getElementById('user-email').value.trim();
                const phone = document.getElementById('user-phone').value.trim();
                
                // Validate inputs
                if (!name || !email || !phone) {
                    alert('Будь ласка, заповніть всі поля');
                    return;
                }
                
                if (!isValidEmail(email)) {
                    alert('Будь ласка, введіть коректний email');
                    return;
                }
                
                // Save user data
                userData.name = name;
                userData.email = email;
                userData.phone = phone;
                userData.timestamp = new Date().toISOString();
                
                // Store user data locally (backup)
                localStorage.setItem('userData', JSON.stringify({ name, email, phone }));
                
                // Start quiz
                document.getElementById('registration-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                
                // Initialize scores to 0 for all directives
                scores = {};
                questions.forEach(q => {
                    scores[q.directive] = 0;
                });
                
                currentQuestion = 0;
                
                displayQuestion();
            });
        });

        // Modal functions
        function openNDA() {
            document.getElementById('nda-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeNDA(event) {
            if (!event || event.target.id === 'nda-modal') {
                document.getElementById('nda-modal').classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        function openDisclaimer() {
            document.getElementById('disclaimer-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeDisclaimer(event) {
            if (!event || event.target.id === 'disclaimer-modal') {
                document.getElementById('disclaimer-modal').classList.add('hidden');
                document.body.style.overflow = 'auto';
            }
        }

        // Make functions globally available
        window.showRegistration = showRegistration;
        window.backToWelcome = backToWelcome;
        window.openCourseLink = openCourseLink;
        window.openNDA = openNDA;
        window.closeNDA = closeNDA;
        window.openDisclaimer = openDisclaimer;
        window.closeDisclaimer = closeDisclaimer;
        window.bookPsychologist = bookPsychologist;
        window.handleGoogleSignIn = handleGoogleSignIn;
    </script>
</body>
</html>